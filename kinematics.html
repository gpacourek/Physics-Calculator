<!DOCTYPE html>

<html>
	<head>
		<title>Physics Calculators</title>
	</head>
	
	<body>
		<h1> Kinematics </h1>
		
		<table id="table">
			<tr>
				<td><b>Name</b></td>
				<td><b>Value</b></td>
				<td><b>Known?</b></td>
			</tr>
			<tr>
				<td>Acceleration</td>
				<td><input type="text" id="a" value="1 m/s" func="calcAccel(this.value);"></td>
				<td><input type="checkbox" checked></td>
			</tr>
			<tr>
				<td>Initial Velocity</td>
				<td><input type="text" id="vi" value=0 disabled func="calcVelocity(this.value);"></td>
				<td><input type="checkbox"></td>
			</tr>
			<tr>
				<td>Final Velocity</td>
				<td><input type="text" id="vf" value=0 disabled func="calcVelocity(this.value);"></td>
				<td><input type="checkbox"></td>
			</tr>
			<tr>
				<td>Average Velocity</td>
				<td><input type="text" id="vavg" value=0 disabled func="calcVelocity(this.value);"></td>
				<td><input type="checkbox"></td>
			</tr>
			<tr>
				<td>Time</td>
				<td><input type="text" id="t" value=0 disabled></td>
				<td><input type="checkbox"></td>
			</tr>
			<tr>
				<td>Displacement</td>
				<td><input type="text" id="d" value=0 disabled></td>
				<td><input type="checkbox"></td>
			</tr>
		</table>
		
		<!-- 
		
			v0, vf, a, avg v, d, t
		
		-->
		
		<script>
			function calcAccel (txt) {
				if (txt.length < 1)
					return NaN;
				if (!isNaN(txt)) {
					return parseFloat(txt);
				}
				if (isNaN(txt.substring(0, 1)))
					return NaN;
				var index = 0;
				while (!isNaN(txt.charAt(index)) || txt.charAt(index) == ".")
					index++;
				var num = txt.substring(0, index);
				num = parseFloat(num);
				
				var rest = txt.substring(index);
				var factor = -1;
				
				if (rest == "m/s" || rest == "ms")
					factor = 1;
				
				if (factor == -1)
					return NaN;
				return num / factor;
			}
			
			function calcVelocity (txt) {
				if (txt.length < 1)
					return NaN;
				if (!isNaN(txt)) {
					return parseFloat(txt);
				}
				if (isNaN(txt.substring(0, 1)))
					return NaN;
				var index = 0;
				while (!isNaN(txt.charAt(index)) || txt.charAt(index) == ".")
					index++;
				var num = txt.substring(0, index);
				num = parseFloat(num);
				
				var rest = txt.substring(index);
				var factor = -1;
				
				if (rest == "m/s" || rest == "ms")
					factor = 1;
				else if (rest == "mph")
					factor = 2.237;
				else if (rest == "fps")
					factor = 3.281;
				
				if (factor == -1)
					return NaN;
				return num / factor;
			}
			
			for (var checkbox of document.querySelectorAll("input[type='checkbox']")) {
				checkbox.onclick = function () {
					this.parentElement.parentElement.querySelector("input[type='text']").disabled = !this.checked;
				};
			}
			
			for (var inputBox of document.querySelectorAll("input[type='text']")) {
				inputBox.onkeyup = function () {
					this.setAttribute("hiddenVal", eval(this.getAttribute("func")));
				}
				inputBox.onkeyup();
			}
		
			//setTimeout(() => {location.reload()}, 10000);
		</script>
	</body>
</html>